<div class="container">
  <div class="row mt-3 align-items-center">
    <div class="col-2">
      <a class="btn btn-outline-info mb-2" href="/new"><i class="fas fa-plus"></i></a>
    </div>
    <div class="col-8 d-flex">
      <h3>{{filterCategory}}總花費:</h3>
      <h3 class="totalAmount"></h3>
    </div>
    <div class="col-2">
      <div class="dropdown d-flex justify-content-end">
        <button class="btn btn-secondary border-secondary btn-sm dropdown-toggle w-75 mb-2" type="button"
          id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          篩選:{{filterCategory}}
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <a class="dropdown-item" href="/filter?category=全部">全部</a>
          {{#each categories}}
          <a class="dropdown-item" href="/filter?category={{this.category}}">{{this.category}}</a>
          {{/each}}
        </div>
      </div>
    </div>
  </div>
  <hr class="m-1 mb-3">
  <!-- records list -->
  <div class="row mb-2">
    <div class="col-2">
      <h5>類別</h5>
    </div>
    <div class="col-4">
      <h5>細目</h5>
    </div>
    <div class="col-1">

    </div>
    <div class="col-3">
      <h5>金額</h5>
    </div>
    <div class="col-2">
      <span></span>
    </div>
  </div>
  {{#each records}}
  <div class="row mt-1 py-2 bg-light rounded-lg">
    <div class="col-2 d-flex align-items-center">
      <i class="{{this.icon}} fa-lg w-25 d-block"></i>
      <span class="d-none d-xl-block">{{this.category}}</span>
    </div>
    <div class="col-4 d-flex flex-column justify-content-center">
      <span>{{this.name}}</span>
      <span>{{this.date}}</span>
    </div>
    <div class="col-1 d-flex align-items-center">

    </div>
    <div class="col-3 d-flex align-items-center">
      <span class="amount">{{this.amount}}</span>
    </div>
    <div class="col-2 d-flex justify-content-end align-items-center">
      <a class="btn btn-outline-info ml-2 d-flex" style="height: 45px;" href="/edit/{{this._id}}">
        <i class="fas fa-pencil-alt align-self-center"></i>
      </a>
      <button class="btn btn-outline-danger ml-2" type="button" data-toggle="modal" data-target="#id-{{this._id}}"
        style="display: inline; height: 45px;">
        <i class="fas fa-trash-alt"></i>
      </button>
    </div>
  </div>

  <!-- Delete confirm Modal -->
  <div class="modal fade" id="id-{{this._id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">確定要刪除？</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-outline-info" data-dismiss="modal">Cancel</button>
          <form action="/delete/{{ this._id }}?category={{this.category}}" method="POST" style="display: inline;">
            <button type="submit" class="btn btn-outline-danger">Yes</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  {{/each}}

</div>

<script src="/javascripts/index.js"></script>